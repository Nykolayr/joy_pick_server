# –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–û–ï–ö–¢–ê

> **–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –≤—Å–µ —Ñ–∞–π–ª—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Å—Å—ã–ª–∞–µ—Ç—Å—è, –ø–æ –ø–æ—Ä—è–¥–∫—É.

## üìç –ì–¥–µ –º—ã —Å–µ–π—á–∞—Å

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ waste: —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—É—à, —á–µ—Ä–µ–∑ 8 –¥–Ω–µ–π —É–¥–∞–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–¥–ª–µ–Ω–∞)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `expires_at` –∏ `extended_count` –≤ —Ç–∞–±–ª–∏—Ü—É requests –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—è–≤–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω endpoint `POST /api/requests/:id/extend` –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ waste –µ—â–µ –Ω–∞ –Ω–µ–¥–µ–ª—é (–º–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ cron –∑–∞–¥–∞—á–∞: —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏ - `notifyInactiveWasteRequests` (–ø—É—à —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π) –∏ `deleteInactiveRequests` (—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 8 –¥–Ω–µ–π)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ UUID –∏–∑ –ë–î (–ø–æ–ª–µ `id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`), –Ω–µ Firebase UID
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è `joined_user_id` –∏ `actual_participants` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ UUID
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, —á—Ç–æ –≤—Å–µ ID –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UUID –∏–∑ –ë–î
- ‚ö†Ô∏è **–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ cron –∑–∞–¥–∞—á–∞—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - `INTERVAL 22 HOUR 1 MINUTE` (–≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ `INTERVAL 1320 MINUTE` –∏ `INTERVAL 1321 MINUTE`)

### –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏
1. **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `database/add_expires_at_and_extended_count.sql` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π `expires_at` –∏ `extended_count`
2. **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `scripts/cronTasks.js` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–∞–±–æ—Ç–∞—é—Ç —Å UUID –∏–∑ –ë–î
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç UUID –∏–∑ –ë–î, –∞ –Ω–µ Firebase UID

## üìö –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã –Ω–∞ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—á–∏—Ç–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)
1. **[IMPORTANT_NOTES.md](./IMPORTANT_NOTES.md)** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º
   - –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–æ–≥–æ–≤
   - –í—Å–µ –æ—à–∏–±–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ API
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ Beget
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **[.cursorrules](./.cursorrules)** - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - –î—É–±–ª–∏—Ä—É–µ—Ç –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ IMPORTANT_NOTES.md
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

3. **[REQUEST_CONCEPT.md](./REQUEST_CONCEPT.md)** - –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∑–∞—è–≤–æ–∫
   - –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫ –∏ –∏—Ö –ª–æ–≥–∏–∫–∞
   - –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞—è–≤–æ–∫ –ø–æ —Ç–∏–ø–∞–º (wasteLocation, speedCleanup, event)
   - Cron –∑–∞–¥–∞—á–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
   - Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
4. **[API_DOCUMENTATION.md](./API_DOCUMENTATION.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
   - –í—Å–µ endpoints
   - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
   - –§–æ—Ä–º–∞—Ç –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏ (UTC ISO 8601)
   - **–í–∞–∂–Ω–æ:** –í—Å–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UUID –∏–∑ –ë–î

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
5. **–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å:**
   - `api/` - API —Ä–æ—É—Ç—ã –∏ –ª–æ–≥–∏–∫–∞
   - `scripts/cronTasks.js` - Cron –∑–∞–¥–∞—á–∏
   - `database/` - SQL –º–∏–≥—Ä–∞—Ü–∏–∏

6. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å:**
   - `joy_pick_app/` - Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–µ—Ä–≤–µ—Ä
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Beget (ocelot)
- **Node.js:** v18.19.0
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** MySQL
- **Cron:** node-cron (–≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π cron)
- **–î–æ–º–µ–Ω:** autogie1.bget.ru

### –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è UUID –∏–∑ –ë–î (–ø–æ–ª–µ `id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`), –ù–ï Firebase UID
- **–î–∞—Ç—ã:** –í—Å–µ –¥–∞—Ç—ã –≤ UTC, —Ñ–æ—Ä–º–∞—Ç ISO 8601
- **–û—à–∏–±–∫–∏:** –í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ JSON –æ—Ç–≤–µ—Ç–µ API —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–õ–æ–≥–∏:** –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ù–ï–¢ –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥–∞–º —Å–µ—Ä–≤–µ—Ä–∞

### Cron –∑–∞–¥–∞—á–∏
- `autoCompleteSpeedCleanup` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ speedCleanup —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
- `checkWasteReminders` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –∑–∞ 2 —á–∞—Å–∞ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ (22 —á–∞—Å–∞ –ø–æ—Å–ª–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
- `checkExpiredWasteJoins` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (24 —á–∞—Å–∞)
- `deleteInactiveRequests` - —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞—è–≤–æ–∫ (7 –¥–Ω–µ–π)
- `checkEventTimes` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Å–æ–±—ã—Ç–∏—è (24 —á–∞—Å–∞, 2 —á–∞—Å–∞, –Ω–∞—á–∞–ª–æ)

## üéØ –ë–ª–∏–∂–∞–π—à–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–ª–µ–Ω `scripts/cronTasks.js`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç UUID –∏–∑ –ë–î
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É cron –∑–∞–¥–∞—á –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ cron –∑–∞–¥–∞—á–∞—Ö:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å `INTERVAL 22 HOUR 1 MINUTE` –≤–º–µ—Å—Ç–æ `INTERVAL 1320 MINUTE`
2. **ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤–µ–∑–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç UUID –∏–∑ –ë–î, –∞ –Ω–µ Firebase UID

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ `.cursorrules` –∏ `IMPORTANT_NOTES.md`
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UUID –∏–∑ –ë–î
- –í—Å–µ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ JSON –æ—Ç–≤–µ—Ç–µ API —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

